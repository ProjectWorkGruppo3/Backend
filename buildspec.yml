version: 0.2

phases:
  install:
    runtime-versions:
      dotnet: latest
  pre_build:
    commands:
      - echo '------Pre Build Phase------'
      - echo '------Move to src Folder------'
      - cd src/
      - echo '------Restore Serendipity.WebApi.csproj------'
      - dotnet restore Serendipity.WebApi/Serendipity.WebApi.csproj
  build:
    commands:
      - echo '------Build Phase------'
      - echo '------Build Project------'
      - dotnet build Serendipity.WebApi/Serendipity.WebApi.csproj
  post_build:
    commands:
      - echo '------Post-Build Phase------'
      - echo '------Publish Project------'
      - dotnet publish -c Release -r linux-x64 -o ./build Serendipity.WebApi/Serendipity.WebApi.csproj